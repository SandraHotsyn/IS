{% extends "base.html" %} {% block content %}
<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>üõí –£—Å—ñ —Ç–æ–≤–∞—Ä–∏</h2>
    <a href="{{ url_for('admin_bp.create_product') }}" class="btn btn-success"
      >‚ûï –î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä</a
    >
  </div>
  <form
    method="get"
    action="{{ url_for('admin_bp.admin_products') }}"
    class="d-flex mb-4"
    style="max-width: 400px"
  >
    <input
      type="text"
      name="q"
      class="form-control me-2"
      placeholder="üîç –ü–æ—à—É–∫ –∑–∞ –Ω–∞–∑–≤–æ—é..."
      value="{{ request.args.get('q', '') }}"
    />
    <button type="submit" class="btn btn-outline-primary">–ü–æ—à—É–∫</button>
  </form>
  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %} {% for category, message in messages %}
  <div
    class="alert alert-{{ category }} alert-dismissible fade show"
    role="alert"
  >
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  {% endfor %} {% endif %} {% endwith %}

  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th>–ù–∞–∑–≤–∞</th>
        <th>–¶—ñ–Ω–∞</th>
        <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>
        <th>–ü—ñ–¥–∫–∞—Ç–µ–≥–æ—Ä—ñ—è</th>
        <th>–î—ñ—ó</th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
      <tr>
        <td><strong>{{ product.name }}</strong></td>
        <td>{{ product.price }} –≥—Ä–Ω</td>
        <td>{{ product.stock }}</td>
        <td>{{ product.subcategory.name }}</td>
        <td>
          <a
            href="{{ url_for('admin_bp.edit_product', product_id=product.id) }}"
            class="btn btn-sm btn-primary"
            >‚úèÔ∏è</a
          >
          <form
            method="POST"
            action="{{ url_for('admin_bp.delete_product', product_id=product.id) }}"
            class="d-inline"
          >
            <button
              type="submit"
              class="btn btn-sm btn-danger"
              onclick="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ?')"
            >
              üóëÔ∏è
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

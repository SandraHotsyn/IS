{% extends "base.html" %} {% block content %}
<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>üìã –£—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
    <a href="{{ url_for('export_orders') }}" class="btn btn-success"
      >‚¨á –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —É Excel</a
    >
  </div>

  {% if orders %} {% for order in orders %}
  <div class="card mb-4">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center">
        <h5 class="card-title mb-3">üßæ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #{{ order.id }}</h5>

        {% if order.status == "–æ–ø—Ä–∞—Ü—å–æ–≤–∞–Ω–æ" %}
        <span class="badge bg-success">‚úÖ –û–ø—Ä–∞—Ü—å–æ–≤–∞–Ω–æ</span>
        {% elif order.status == "–≤—ñ–¥–º–æ–≤–∞" %}
        <span class="badge bg-danger">‚ùå –í—ñ–¥–º–æ–≤–∞</span>
        {% else %}
        <span class="badge bg-warning text-dark">üïì –ù–æ–≤–µ</span>
        {% endif %}
      </div>

      <p class="card-text">
        <strong>–ö–ª—ñ—î–Ω—Ç:</strong> {{ order.customer.name }}<br />
        <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ order.customer.phone }}<br />
        <strong>–î–∞—Ç–∞:</strong> {{ order.date.strftime('%Y-%m-%d %H:%M') }}
        <strong>Email:</strong> {{ order.customer.email }}<br />
        <strong>–ê–¥—Ä–µ—Å–∞:</strong> {{ order.customer.address }}<br />
      </p>

      <ul class="list-group mb-2">
        {% for item in order.items %}
        <li class="list-group-item">
          {{ item.product.name }} ‚Äî {{ item.quantity }} √ó {{ item.unit_price }}
          –≥—Ä–Ω
        </li>
        {% endfor %}
      </ul>

      <p class="fw-bold">–°—É–º–∞: {{ order.total }} –≥—Ä–Ω</p>

      {% if order.status|lower == "–Ω–æ–≤–µ" %}
      <div class="mt-2">
        <a
          href="{{ url_for('mark_order', order_id=order.id, status='–æ–ø—Ä–∞—Ü—å–æ–≤–∞–Ω–æ') }}"
          class="btn btn-sm btn-outline-success me-2"
          >‚úÖ –û–ø—Ä–∞—Ü—å–æ–≤–∞–Ω–æ</a
        >
        <a
          href="{{ url_for('mark_order', order_id=order.id, status='–≤—ñ–¥–º–æ–≤–∞') }}"
          class="btn btn-sm btn-outline-danger"
          >‚ùå –í—ñ–¥–º–æ–≤–∞</a
        >
      </div>
      {% endif %}
    </div>
  </div>
  {% endfor %} {% else %}
  <div class="alert alert-info">–ù–µ–º–∞—î –∑–∞–º–æ–≤–ª–µ–Ω—å.</div>
  {% endif %}

  <a href="{{ url_for('index') }}" class="btn btn-outline-primary mt-4"
    >‚¨Ö –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –Ω–∞ –≥–æ–ª–æ–≤–Ω—É</a
  >
</div>
{% endblock %}
